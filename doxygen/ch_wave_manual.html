<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Edinburgh Speech Tools: ch_wave</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="est.jpg"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Edinburgh Speech Tools
   &#160;<span id="projectnumber">2.1-release</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ch_wave_manual.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ch_wave </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#synopsis">Synopsis</a></li>
<li class="level1"><a href="#options">Options</a></li>
<li class="level1"><a href="#merge_waves">Making multiple waves into a single wave</a></li>
<li class="level1"><a href="#extract_channel">Extracting channels from multi-channel waves</a></li>
<li class="level1"><a href="#extract_region">Extracting of a single region from a waveform</a></li>
<li class="level1"><a href="#extract_multiple_regions">Extracting of a multiple regions from a waveform</a></li>
<li class="level1"><a href="#add_headers">Adding headers and format conversion</a></li>
</ul>
</div>
<div class="textblock"><p><em>Audio file manipulation</em></p>
<h1><a class="anchor" id="synopsis"></a>
Synopsis</h1>
<p>ch_wave [input file0] [input file1] ... -o [output file] [-h ] [-itype <em>string</em>] [-n <em>int</em>] [-f <em>int</em>] [-ibo <em>string</em>] [-iswap ] [-istype <em>string</em>] [-c <em>string</em>] [-start <em>float</em>] [-end <em>float</em>] [-from <em>int</em>] [-to <em>int</em>] [-o <em>ofile</em>] [-otype <em>string</em>] [-F <em>int</em>] [-obo <em>string</em>] [-oswap ] [-ostype <em>string</em>] [-scale <em>float</em>] [-scaleN <em>float</em>] [-lpfilter <em>int</em>] [-hpfilter <em>int</em>] [-forder <em>int</em>] [-fafter ] [-info ] [-add ] [-pc <em>string</em>] [-key <em>ifile</em>] [-divide. ] [-divide ] [-ext <em>string</em>] [-extract <em>string</em>]</p>
<p>ch_wave is used to manipulate the format of a waveform file. Operations include:</p>
<ul>
<li>file format conversion</li>
<li>resampling (changing the sampling frequency)</li>
<li>byte-swapping</li>
<li>making multiple input files into a single multi-channel output file</li>
<li>making multiple input files into a single single-channel output file</li>
<li>extracting a single channel from a multi-channel waveform</li>
<li>scaling the amplitude of the waveform</li>
<li>low pass and high pass filtering</li>
<li>extracting a time-delimited portion of the waveform</li>
</ul>
<p>ch_wave is a executable program that serves as a wrap-around for the <a class="el" href="classEST__Wave.html" title="A class for storing digital waveforms. The waveform is stored as an array of 16 bit shorts...">EST_Wave</a> class and the basic wave manipulation functions. More advanced waveform processing is performed by the signal processing library.</p>
<h1><a class="anchor" id="options"></a>
Options</h1>
<ul>
<li><b>-h</b>: Options help</li>
<li><b>-itype</b>: <em>string</em> Input file type (optional). If set to raw, this indicates that the input file does not have a header. While this can be used to specify file types other than raw, this is rarely used for other purposes as the file type of all the existing supported types can be determined automatically from the file's header. If the input file is unheadered, files are assumed to be shorts (16bit). Supported types are nist, est, esps, snd, riff, aiff, audlab, raw, ascii</li>
<li><b>-n</b>: <em>int</em> Number of channels in an unheadered input file</li>
<li><b>-f</b>: <em>int</em> Sample rate in Hertz for an unheadered input file</li>
<li><b>-ibo</b>: <em>string</em> Input byte order in an unheadered input file: possibliities are: MSB , LSB, native or nonnative. Suns, HP, SGI Mips, M68000 are MSB (big endian) Intel, Alpha, DEC Mips, Vax are LSB (little endian)</li>
<li><b>-iswap</b>: Swap bytes. (For use on an unheadered input file)</li>
<li><b>-istype</b>: <em>string</em> Sample type in an unheadered input file: short, alaw, mulaw, byte, ascii</li>
<li><b>-c</b>: <em>string</em> Select a single channel (starts from 0). Waveforms can have multiple channels. This option extracts a single channel for progcessing and discards the rest.</li>
<li><b>-start</b>: <em>float</em> Extract sub-wave starting at this time, specified in seconds</li>
<li><b>-end</b>: <em>float</em> Extract sub-wave ending at this time, specified in seconds</li>
<li><b>-from</b>: <em>int</em> Extract sub-wave starting at this sample point</li>
<li><b>-to</b>: <em>int</em> Extract sub-wave ending at this sample point</li>
<li><b>-o</b>: <em>ofile</em> Output filename. If not specified output is to stdout.</li>
<li><b>-otype</b>: <em>string</em> Output file type, (optional). If no type is Specified the type of the input file is assumed. Supported types are: nist, est, esps, snd, riff, aiff, audlab, raw, ascii</li>
<li><b>-F</b>: <em>int</em> Output sample rate in Hz. If this is different from the input sample rate, resampling will occur</li>
<li><b>-obo</b>: <em>string</em> Output byte order: MSB, LSB, native, or nonnative. Suns, HP, SGI Mips, M68000 are MSB (big endian) Intel, Alpha, DEC Mips, Vax are LSB (little endian)</li>
<li><b>-oswap</b>: Swap bytes when saving to output</li>
<li><b>-ostype</b>: <em>string</em> Output sample type: short, alaw, mulaw, byte or ascii</li>
<li><b>-scale</b>: <em>float</em> Scaling factor. Increase or descrease the amplitude of the whole waveform by the factor given</li>
<li><b>-scaleN</b>: <em>float</em> Scaling factor with normalization. The waveform is scaled to its maximum level, after which it is scaled by the factor given</li>
<li><b>-lpfilter</b>: <em>int</em> Low pass filter, with cutoff frequency in Hz Filtering is performed by a FIR filter which is built at run time. The order of the filter can be given by -forder. The default value is 199</li>
<li><b>-hpfilter</b>: <em>int</em> High pass filter, with cutoff frequency in Hz Filtering is performed by a FIR filter which is built at run time. The order of the filter can be given by -forder. The default value is 199.</li>
<li><b>-forder</b>: <em>int</em> Order of FIR filter used for lpfilter and hpfilter. This must be ODD. Sensible values range from 19 (quick but with a shallow rolloff) to 199 (slow but with a steep rolloff). The default is 199.</li>
<li><b>-fafter</b>: Do filtering after other operations such as resampling (default : filter before other operations)</li>
<li><b>-info</b>: Print information about file and header. This option gives useful information such as file length, sampling rate, number of channels etc No output is produced</li>
<li><b>-add</b>: A new single channel waveform is created by adding the corresponding sample points of each input waveform</li>
<li><b>-pc</b>: <em>string</em> Combine input waveforms to form a single multichannel waveform. The argument to this option controls how long the new waveform should be. If the option is LONGEST, the output wave if the length of the longest input wave and shorter waves are padded with zeros at the end. If the option is FIRST, the length of the new waveform is the length of the first file on the command line, and subsequent waves are padded or cut to this length</li>
<li><b>-key</b>: <em>ifile</em> Label file designating subsections, for use with</li>
<li><b>-divide.</b>: The KEYLAB file is a label file which specifies where chunks (such as individual sentences) in a waveform begin and end. See section of wave extraction.</li>
<li><b>-divide</b>: Divide a single input waveform into multiple output waveforms. Each output waveform is extracted from the input waveform by using the KEYLAB file, which specifies the start and stop times for each chunk. The output files are named according to the filename in the KEYLAB file, with extension given by -ext. See section on wave extraction</li>
<li><b>-ext</b>: <em>string</em> File extension for divided waveforms</li>
<li><b>-extract</b>: <em>string</em> Used in conjunction with -key to extract a single section of waveform from the input waveform. The argument is the name of a file given in the file column of the KEYLAB file.</li>
</ul>
<h1><a class="anchor" id="merge_waves"></a>
Making multiple waves into a single wave</h1>
<p>If multiple input files are specified, by default they are concatenated into the output file. </p>
<pre class="fragment">$ ch_wave kdt_010.wav kdt_011.wav kdt_012.wav kdt_013.wav -o out.wav
</pre><p>In the above example, 4 single channel input files are converted to one single channel output file. Multi-channel waveforms can also be concatenated provided they all have the same number of input channels.</p>
<p>Multiple input files can be made into a multi-channel output file by using the -pc option:</p>
<pre class="fragment">$ ch_wave kdt_010.wav kdt_011.wav kdt_012.wav kdt_013.wav -o -pc LONGEST out.wav
</pre><p>The argument to -pc can either be LONGEST, in which the output waveform is the length of the longest input file, or FIRST in which it is the length of the first input file.</p>
<h1><a class="anchor" id="extract_channel"></a>
Extracting channels from multi-channel waves</h1>
<p>The <code>-c</code> option is used to specify channels which should be extracted from the input. If the input is a 4 channel wave, </p>
<pre class="fragment">$ ch_wave kdt_m.wav -o a.wav -c "0 2"
</pre><p>will extract the 0th and 2nd channel (counting starts from 0). The argument to <code>-c</code> can be either a single number of a list of numbers (wrapped in quotes)</p>
<h1><a class="anchor" id="extract_region"></a>
Extracting of a single region from a waveform</h1>
<p>There are several ways of extracting a region of a waveform. The simplest way is by using the start, end, to and from commands to delimit a sub portion of the input wave. For example,</p>
<pre class="fragment">$ ch_wave kdt_010.wav -o small.wav -start 1.45 -end 1.768
</pre><p>extracts a subwave starting at 1.45 seconds and extending to 1.768 seconds.</p>
<p>Alternatively, </p>
<pre class="fragment">$ ch_wave kd_010.wav -o small.wav -from 5000 -to 10000
</pre><p>extracts a subwave starting at 5000 samples and extending to 10000 samples. Times and samples can be mixed in sub-wave extraction. The output waveform will have the same number of channels as the input waveform.</p>
<h1><a class="anchor" id="extract_multiple_regions"></a>
Extracting of a multiple regions from a waveform</h1>
<p>Multiple regions can be extracted from a waveform, but as it would be too complicated to specify the start and end points on the command line, a label file with start and end points, and file names is used.</p>
<p>The file is called a key label file and in xwaves label format looks like:</p>
<pre class="fragment">separator ;
#
0.308272  121 sil ;     file kdt_010.01 ;
0.440021  121 are ;     file kdt_010.02 ;
0.512930  121 your ;    file kdt_010.03 ;
0.784097  121 grades ;  file kdt_010.04 ;
1.140969  121 higher ;  file kdt_010.05 ;
1.258647  121 or ;      file kdt_010.06 ;
1.577145  121 lower ;   file kdt_010.07 ;
1.725516  121 than ;    file kdt_010.08 ;
2.315186  121 nancy's ; file kdt_010.09 ;
</pre><p>Each line represents one region. The first column is the end time of that region and the start time of the next. The next two columns are colour and an arbitrary name, and the filename in which the output waveform is to be stored is kept as a field called file in the last column. In this example, each region corresponds to a single word in the file.</p>
<p>If the above file is called "kdt_010.words.keylab", the command: </p>
<pre class="fragment">$ ch_wave kdt_010.wav -key kdt_010.words -ext .wav -divide
</pre><p>will divide the input waveform into 9 output waveforms called kdt_010.01.wav, kdt_010.02.wav ... kdt_010.09.wav. The <code>-ext</code> option specifies the extension of the new waveforms, and the <code>-divide</code> command specifies that division of the entire waveform is to take place.</p>
<p>If only a single file is required the <code>-extract</code> option can be used, in which case its argument is the filename required.</p>
<pre class="fragment">$ ch_wave kdt_010.wav -key kdt_010.words -ext .wav -extract kdt_010.03 \
      -o kdt_010.03.wav
</pre><p>Note that an output filename should be specified with this option.</p>
<h1><a class="anchor" id="add_headers"></a>
Adding headers and format conversion</h1>
<p>It is usually a good idea for all waveform files to have headers as this way different byte orders, sampling rates etc can be handled safely. ch_wave provides a means of adding headers to raw files.</p>
<p>The following adds a header to a file of 16 bit shorts </p>
<pre class="fragment">$ ch_wave kdt_010.raw1 -o kdt_010.h1.wav -otype nist -f 16000 -itype raw
</pre><p>The following downsamples the input to 8 KHz </p>
<pre class="fragment">$ ch_wave kdt_010.raw1 -o kdt_010.h2.wav -otype nist -f 16000  \
          -F 8000 -itype raw
</pre><p>The following takes a 8K ulaw input file and produces a 16bit, 20Khz output file: </p>
<pre class="fragment">$ ch_wave kdt_010.raw2 -o kdt_010.h3.wav -otype nist -istype ulaw \
              -f 8000 -F 20000 -itype raw</pre> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Feb 11 2014 12:00:41 for Edinburgh Speech Tools by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
