<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Edinburgh Speech Tools: XML support</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="est.jpg"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Edinburgh Speech Tools
   &#160;<span id="projectnumber">2.1-release</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('estxml.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">XML support </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>There are three levels of support for XML with EST.</p>
<ul>
<li><em>Loading as an Utterance</em>: A built in XML parser allows text marked up according to an XML DTD to be read into an <a class="el" href="classEST__Utterance.html">EST_Utterance</a> (see <a class="el" href="estxml.html#xmltoutterance">Reading XML Text As An EST_Utterance</a>).</li>
</ul>
<ul>
<li><em><a class="el" href="classXML__Parser__Class.html">XML_Parser_Class</a></em>: A C++ class <a class="el" href="classXML__Parser__Class.html">XML_Parser_Class</a> which makes it relatively simple to write specialised XML processing code.</li>
<li><em>RXP</em>: The RXP XML parser is included and can be used directly (<a class="el" href="estxml.html#rxpparser">The RXP XML Parser</a>).</li>
</ul>
<h1><a class="anchor" id="xmltoutterance"></a>
Reading XML Text As An EST_Utterance</h1>
<p>In order to read XML marked up text, the EST code must be told how the XML markup should relate to the utterance structure. This is done by annotating the DTD using which the text is processed.</p>
<p>There are two possible ways to anotate the DTD. Either a new DTD can be created with the anotations added, or the anotations can be included in the XML file.</p>
<p><b>A new DTD</b></p>
<p>To write a new DTD based on an existing one, you should include the existing one as follows: </p>
<div class="fragment"><div class="line">&lt;!-- Extended FooBar DTD <span class="keywordflow">for</span> speech tools --&gt;</div>
<div class="line"></div>
<div class="line">&lt;!-- Include original FooBar DTD --&gt;</div>
<div class="line">&lt;!ENTITY % OldFooBarDTD PUBLIC <span class="stringliteral">&quot;//Foo//DTD Bar&quot;</span></div>
<div class="line">                <span class="stringliteral">&quot;http://www.foo.org/dtds/org.dtd&quot;</span>&gt;</div>
<div class="line">%OldFooBarDTD;</div>
<div class="line"></div>
<div class="line">&lt;!-- Your extensions, <span class="keywordflow">for</span> instance... --&gt;</div>
<div class="line"></div>
<div class="line">&lt;!-- syn-node elements are nodes in the Syntax relation  --&gt;</div>
<div class="line">&lt;!ATTLIST syn-node relationNode CDATA #FIXED <span class="stringliteral">&quot;Syntax&quot;</span> &gt;</div>
</div><!-- fragment --><p><b>In the XML file</b></p>
<p>Extensions to the DTD can be included in the <code>!DOCTYPE</code> declaration in the marked up text. For instance: </p>
<div class="fragment"><div class="line">  &lt;?xml version=<span class="stringliteral">&#39;1.0&#39;</span>?&gt;</div>
<div class="line">  &lt;!DOCTYPE utterance PUBLIC <span class="stringliteral">&quot;//Foo//DTD Bar&quot;</span></div>
<div class="line">              <span class="stringliteral">&quot;http://www.foo.org/dtds/org.dtd&quot;</span></div>
<div class="line">[</div>
<div class="line">&lt;!-- Item elements are nodes in the Syntax relation  --&gt;</div>
<div class="line">&lt;!ATTLIST item relationNode CDATA #FIXED <span class="stringliteral">&quot;Syntax&quot;</span> &gt;</div>
<div class="line">]&gt;</div>
<div class="line"></div>
<div class="line">  &lt;utterance&gt;</div>
<div class="line">  &lt;!-- Actual markup starts here --&gt;</div>
</div><!-- fragment --><h2>Summary of DTD Anotations</h2>
<p>The following attributes may be added to elements in your DTD to describe it's relation to <a class="el" href="classEST__Utterance.html">EST_Utterance</a> structures.</p>
<ul>
<li><p class="startli"><em>estUttFeats</em>: The value should be a comma separated list of attributes which should be set as features on the utterance. Each attribute can be either a simple identifier, or two identifiers separated by a colon <code>:</code>.</p>
<p class="startli">A value <code>foo:bar</code> causes the value of the <code>foo</code> attribute of the element to be set as the value of the Utterance feature <code>bar</code>.</p>
<p class="startli">A simple identifier <code>foo</code> causes the <code>foo</code> attribute of the element to be set as the value of the Utterance feature <code>X_foo</code> where <code>X</code> is the name of the element.</p>
</li>
</ul>
<ul>
<li><em>estRelationFeat</em>: The value should be a comma separated list of attributes which should be set as features on the relation related to this element. It's format and meaning is the same as for <code>estUttFeats</code>.</li>
</ul>
<ul>
<li><em>estRelationElementAttr</em>: Indicates that this element defines a relation. All elements inside this one will be made nodes in the relation, unless they are explicitly marked to be ignored by <em>estRelationIgnore</em>. The value of the <em>estRelationElementAttr</em> attribute is the name of an attribute which gives the name of the relation.</li>
</ul>
<ul>
<li><em>estRelationTypeAttr</em>: When an element has a <em>estRelationElementAttr</em> tag to indicate it's content defines a relaion, it may also have the <em>estRelationTypeAttr</em> tag. This gives the name of an attribute which gives the type of relation. Currently only a type of `list' or `linear' gives a lienar relation, anything else gives a tree.</li>
</ul>
<ul>
<li><em>estRelationIgnore</em>: If this is set to any value on an element which would otherwise be interpreted as an <a class="el" href="classEST__Item.html">EST_Item</a> in the current relation, the element is passed over. The contents will be processed as if they had been directly inside this element's parent.</li>
</ul>
<ul>
<li><em>estRelationNode</em>: When placed on an element, indicates that this element is to be interpreted as an item in the relation named in the value of the attribute.</li>
</ul>
<ul>
<li><em>estExpansion</em>: The value of this attribute defines how ranges in <em>href</em> attributes are expanded for this element. If the value is <code>replace</code> the nodes created during expansion are placed at the same level in the hierachy as the original element. If the value is <code>embed</code> they are created as children of a new node.</li>
</ul>
<ul>
<li><em>estContentFeature</em>: The value of this attribute is the featre which is set to the contents of the current element.</li>
</ul>
<h1><a class="anchor" id="xmlparserclass"></a>
The XML_Parser_Class C++ Class</h1>
<p>The C++ class <a class="el" href="classXML__Parser__Class.html">XML_Parser_Class</a> (declared in <a class="el" href="XML__Parser_8h_source.html">rxp/XML_Parser.h</a>) defines an abstract interface to the XML parsing process. By breating a sub-class of <a class="el" href="classXML__Parser__Class.html">XML_Parser_Class</a> you can create code to read XML marked up text quite simply.</p>
<h2><a class="anchor" id="xmlparserclassdefinitions"></a>
Some Definitions</h2>
<ul>
<li>An XML parser is an object which can analyse a piece of text marked up according to an XML doctype and perform actions based on the markup. One XML parser deals with one text.</li>
</ul>
<ul>
<li>An XML parser is represented by an instance of the class <a class="el" href="classXML__Parser.html">XML_Parser</a>.</li>
</ul>
<ul>
<li>An XML parser class is an object from which XML parses can be created. It defines the behaviour of the parsers when they process their assigned text, and also a mapping from XML entity IDs to places to look for them.</li>
</ul>
<ul>
<li>An XML parser class is represented by an instance of <a class="el" href="classXML__Parser__Class.html">XML_Parser_Class</a> or a subclass of <a class="el" href="classXML__Parser__Class.html">XML_Parser_Class</a>.</li>
</ul>
<h2><a class="anchor" id="xmlcreatingxmlproc"></a>
Creating An XML Processing Procedure</h2>
<p>In order to create a procedure which will process XML marked up text in the manner of your choice you need to do 4 things. Simple examples can be found in <a class="el" href="xml__example_8cc_source.html">testsuite/xml_example.cc</a> and <a class="el" href="xml__parser__main_8cc_source.html">main/xml_parser_main.cc</a>.</p>
<h3>Create a Sub-Class of <a class="el" href="classXML__Parser__Class.html">XML_Parser_Class</a></h3>
<p>Not written</p>
<h3>Create a Structure Holding the State of the Parse</h3>
<p>Not written</p>
<h3>Decide How Entity IDs Should Be Converted To Filenames</h3>
<p>Not written</p>
<h3>Write A Procedure To Start The Parser</h3>
<p>Not written</p>
<h2>The <a class="el" href="classXML__Parser__Class.html">XML_Parser_Class</a> in Detail</h2>
<p>Not written</p>
<ul>
<li>XMLParser</li>
</ul>
<h1><a class="anchor" id="rxpparser"></a>
The RXP XML Parser</h1>
<p>Included in the EST library is a version of the <em>RXP XML parser</em>. This version is limited to 8-bit characters for consistency with the rest of EST. For more details, see the <em>RXP</em> documentation.</p>
<p>Insert reference to <em>RXP</em> documentation here. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Dec 11 2013 01:00:12 for Edinburgh Speech Tools by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
